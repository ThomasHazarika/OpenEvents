<%- layout("/layouts/boilerplate") %>

<div class="max-w-6xl mx-auto px-4 py-6">
  <!-- Header -->
  <h1 class="text-3xl font-bold text-gray-800 mb-6">
    Discover Upcoming Events
  </h1>

  <!-- Search Bar -->
  <form
    method="POST"
    action="/scrape"
    class="bg-white rounded-xl shadow p-4 flex flex-col md:flex-row gap-4 items-center"
  >
    <input
      type="text"
      name="keyword"
      placeholder="Search events (Hackathon, Hiring, Workshop...)"
      class="w-full md:w-1/2 border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
    />

    <input
      type="text"
      name="location"
      placeholder="Location (India, Remote, Bangalore...)"
      class="w-full md:w-1/3 border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
    />

    <button
      class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold"
    >
      Search & Fetch
    </button>
  </form>

  <!-- Stats -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
    <div class="bg-pink-500 text-white rounded-xl p-6 shadow">
      <p class="text-sm uppercase opacity-80">Total Events</p>
      <p class="text-3xl font-bold"><%= count %></p>
    </div>

    <div class="bg-purple-500 text-white rounded-xl p-6 shadow">
      <p class="text-sm uppercase opacity-80">Platform</p>
      <p class="text-xl font-semibold">Unstop</p>
    </div>

    <div class="bg-green-500 text-white rounded-xl p-6 shadow">
      <p class="text-sm uppercase opacity-80">Status</p>
      <p class="text-xl font-semibold">Live</p>
    </div>
  </div>

  <!-- Table -->
  <div class="mt-8 bg-white shadow rounded-xl overflow-hidden">
    <table class="w-full">
      <thead class="bg-gray-100 text-gray-700 text-sm uppercase">
        <tr>
          <th class="px-4 py-3 text-left">Title</th>
          <th class="px-4 py-3 text-left">Location</th>
          <th class="px-4 py-3 text-left">Deadline</th>
          <th class="px-4 py-3 text-left">Link</th>
        </tr>
      </thead>

      <tbody>
        <% if(events.length === 0) { %>
        <tr>
          <td colspan="4" class="text-center py-6 text-gray-500">
            No events found. Try fetching events.
          </td>
        </tr>
        <% } %> <% events.forEach(event => { %>
        <tr class="border-t hover:bg-gray-50 transition">
          <td class="px-4 py-3 font-medium text-gray-800">
            <%= event.title %>
          </td>
          <td class="px-4 py-3 text-gray-600">
            <%= event.location || "N/A" %>
          </td>
          <td class="px-4 py-3 text-gray-600"><%= event.deadline || "—" %></td>
          <td class="px-4 py-3">
            <% if(event.link) { %>
            <a
              href="<%= event.link %>"
              target="_blank"
              class="text-blue-600 hover:underline font-medium"
            >
              View
            </a>
            
          
            <% } else { %> — <% } %>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>
